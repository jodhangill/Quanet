{% extends "base.html" %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/pyodide/v0.26.2/full/pyodide.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" integrity="sha512-XMVd28F1oH/O71fzwBnV7HucLxVwtxf26XV8P4wPk26EDxuGZ91N8bsOttmnomcCD3CS5ZMRL50H0GgOHvegtg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/viz.js" integrity="sha512-vnRdmX8ZxbU+IhA2gLhZqXkX1neJISG10xy0iP0WauuClu3AIMknxyDjYHEpEhi8fTZPyOCWgqUCnEafDB/jVQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/full.render.js" integrity="sha512-1zKK2bG3QY2JaUPpfHZDUMe3dwBwFdCDwXQ01GrKSd+/l0hqPbF+aak66zYPUZtn+o2JYi1mjXAqy5mW04v3iA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
{% endblock %}

{% block content %}
<div class="w-full border p-10 border-white mt-20">
    <div id="loadingContainer" class="text-center">
        <h2 class="text-xl">Loading...</h2>
        <div id="loadingBar" class="w-full h-4 mb-4 rounded-full">
            <div id="loadingProgress" class="h-4 bg-white rounded-full duration-1000 ease-in-out w-0"></div>
        </div>        
    </div>

    <p id="log">Loading...</p>
    <div id="graph-container"></div>    
</div>

<!-- Run Pyodide in separate thread to keep UI responsive -->
<script src="{{ url_for('static', filename='js/compute/compute.js') }}"></script>
<script src="{{ url_for('static', filename='js/compute/compute.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='js/compute/consumer.js') }}"></script>
{% endblock %}