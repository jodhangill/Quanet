{% extends "base.html" %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/pyodide/v0.26.2/full/pyodide.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"
    integrity="sha512-XMVd28F1oH/O71fzwBnV7HucLxVwtxf26XV8P4wPk26EDxuGZ91N8bsOttmnomcCD3CS5ZMRL50H0GgOHvegtg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/viz.js"
    integrity="sha512-vnRdmX8ZxbU+IhA2gLhZqXkX1neJISG10xy0iP0WauuClu3AIMknxyDjYHEpEhi8fTZPyOCWgqUCnEafDB/jVQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/full.render.js"
    integrity="sha512-1zKK2bG3QY2JaUPpfHZDUMe3dwBwFdCDwXQ01GrKSd+/l0hqPbF+aak66zYPUZtn+o2JYi1mjXAqy5mW04v3iA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script
    src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
{% endblock %}

{% block content %}
<div class="w-full border p-10 border-white mt-20 min-h-[calc(100vh-80px)] md:max-h-[calc(100vh-80px)]">
    <div id="loadingContainer" class="text-center">
        <h2 id="loadingText" class="text-xl">Loading...</h2>
        <div class="flex w-full justify-center">
            <div id="loadingBar" class="w-2/3 h-2 m-4 bg-slate-700">
                <div id="loadingProgress" class="h-2 bg-white duration-1000 ease-in-out w-px"></div>
            </div>
        </div>
    </div>
    <p id="log">Log:</p>
    <div id="net-container"></div>
    <div id="charts">

    </div>
    <div id="carousel">
        <button>-</button>
        <div id="charts">
            <div>
                <canvas id="priceChart0" height="877" width="1755"
                    style="display: block; box-sizing: border-box; height: 702px; width: 1404px;">
                </canvas>
                <canvas
                    id="equityChart0" height="877" width="1755"
                    style="display: block; box-sizing: border-box; height: 702px; width: 1404px;">
                </canvas>
            </div>
            <div>
                <canvas id="priceChart1" height="877" width="1755"
                    style="display: block; box-sizing: border-box; height: 702px; width: 1404px;">
                </canvas>
                <canvas id="equityChart1" height="877" width="1755"
                    style="display: block; box-sizing: border-box; height: 702px; width: 1404px;">
                </canvas>
            </div>
            <div>
                <canvas id="priceChart2" height="877" width="1755"
                    style="display: block; box-sizing: border-box; height: 702px; width: 1404px;">
                </canvas>
                <canvas id="equityChart2" height="877" width="1755"
                    style="display: block; box-sizing: border-box; height: 702px; width: 1404px;">
                </canvas>
            </div>
        </div>
    </div>

</div>


<!-- Run Pyodide in separate thread to keep UI responsive -->
<script src="{{ url_for('static', filename='js/compute/compute.js') }}"></script>
<script src="{{ url_for('static', filename='js/compute/compute.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='js/compute/consumer.js') }}"></script>
{% endblock %}